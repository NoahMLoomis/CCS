!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(m){"use strict";m.multiplexingMode=function(d){var v=Array.prototype.slice.call(arguments,1);function f(e,n,t,r){if("string"==typeof n){var i=e.indexOf(n,t);return r&&-1<i?i+n.length:i}e=n.exec(t?e.slice(t):e);return e?e.index+t+(r?e[0].length:0):-1}return{startState:function(){return{outer:m.startState(d),innerActive:null,inner:null,startingInner:!1}},copyState:function(e){return{outer:m.copyState(d,e.outer),innerActive:e.innerActive,inner:e.innerActive&&m.copyState(e.innerActive.mode,e.inner),startingInner:e.startingInner}},token:function(e,n){if(n.innerActive){var t=n.innerActive,r=e.string;if(!t.close&&e.sol())return n.innerActive=n.inner=null,this.token(e,n);if((c=t.close&&!n.startingInner?f(r,t.close,e.pos,t.parseDelimiters):-1)==e.pos&&!t.parseDelimiters)return e.match(t.close),n.innerActive=n.inner=null,t.delimStyle&&t.delimStyle+" "+t.delimStyle+"-close";-1<c&&(e.string=r.slice(0,c));var i=t.mode.token(e,n.inner);return-1<c?e.string=r:e.pos>e.start&&(n.startingInner=!1),c==e.pos&&t.parseDelimiters&&(n.innerActive=n.inner=null),i=t.innerStyle?i?i+" "+t.innerStyle:t.innerStyle:i}for(var o=1/0,r=e.string,l=0;l<v.length;++l){var c,s=v[l];if((c=f(r,s.open,e.pos))==e.pos){s.parseDelimiters||e.match(s.open),n.startingInner=!!s.parseDelimiters,n.innerActive=s;var a,u=0;return!d.indent||(a=d.indent(n.outer,"",""))!==m.Pass&&(u=a),n.inner=m.startState(s.mode,u),s.delimStyle&&s.delimStyle+" "+s.delimStyle+"-open"}-1!=c&&c<o&&(o=c)}o!=1/0&&(e.string=r.slice(0,o));i=d.token(e,n.outer);return o!=1/0&&(e.string=r),i},indent:function(e,n,t){var r=e.innerActive?e.innerActive.mode:d;return r.indent?r.indent(e.innerActive?e.inner:e.outer,n,t):m.Pass},blankLine:function(e){var n=e.innerActive?e.innerActive.mode:d;if(n.blankLine&&n.blankLine(e.innerActive?e.inner:e.outer),e.innerActive)"\n"===e.innerActive.close&&(e.innerActive=e.inner=null);else for(var t=0;t<v.length;++t){var r=v[t];"\n"===r.open&&(e.innerActive=r,e.inner=m.startState(r.mode,n.indent?n.indent(e.outer,"",""):0))}},electricChars:d.electricChars,innerMode:function(e){return e.inner?{state:e.inner,mode:e.innerActive.mode}:{state:e.outer,mode:d}}}}});