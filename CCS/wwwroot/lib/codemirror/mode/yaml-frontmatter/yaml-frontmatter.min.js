!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror"),require("../yaml/yaml")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../yaml/yaml"],t):t(CodeMirror)}(function(i){i.defineMode("yaml-frontmatter",function(t,e){var a=i.getMode(t,"yaml"),r=i.getMode(t,e&&e.base||"gfm");function o(t){return 1==t.state?{mode:a,state:t.yaml}:{mode:r,state:t.inner}}return{startState:function(){return{state:0,yaml:null,inner:i.startState(r)}},copyState:function(t){return{state:t.state,yaml:t.yaml&&i.copyState(a,t.yaml),inner:i.copyState(r,t.inner)}},token:function(t,e){if(0==e.state)return t.match("---",!1)?(e.state=1,e.yaml=i.startState(a),a.token(t,e.yaml)):(e.state=2,r.token(t,e.inner));if(1!=e.state)return r.token(t,e.inner);var n=t.sol()&&t.match(/(---|\.\.\.)/,!1),t=a.token(t,e.yaml);return n&&(e.state=2,e.yaml=null),t},innerMode:o,indent:function(t,e,n){t=o(t);return t.mode.indent?t.mode.indent(t.state,e,n):i.Pass},blankLine:function(t){t=o(t);if(t.mode.blankLine)return t.mode.blankLine(t.state)}}})});